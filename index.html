<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🌌 Memory Lane 🌌</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Kanit:wght@300;400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Kanit', sans-serif;
            background: #0a0a0a;
            overflow: hidden;
            height: 100vh;
            cursor: none;
        }

        /* Custom Cursor - ซ่อนในมือถือ */
        .custom-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border: 2px solid #ff6b9d;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: difference;
            transition: transform 0.1s ease;
        }

        @media (max-width: 768px) {
            .custom-cursor {
                display: none;
            }
            body {
                cursor: default;
            }
        }

        /* Matrix Background */
        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #000000, #1a1a2e, #16213e, #0f3460);
            overflow: hidden;
        }

        .matrix-char {
            position: absolute;
            color: #00ff88;
            font-family: 'Orbitron', monospace;
            animation: matrix-fall linear infinite;
            opacity: 0.7;
            text-shadow: 0 0 5px #00ff88;
        }

        @keyframes matrix-fall {
            0% { transform: translateY(-100vh); opacity: 1; }
            100% { transform: translateY(100vh); opacity: 0; }
        }

        /* Main Scene */
        .main-scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 5;
            transition: all 1s ease;
        }

        .main-scene.hidden {
            opacity: 0;
            transform: scale(0.8);
        }

        /* Hologram Container */
        .hologram-container {
            perspective: 1000px;
            margin-bottom: 50px;
        }

        .hologram-box {
            width: 200px;
            height: 200px;
            position: relative;
            transform-style: preserve-3d;
            cursor: pointer;
            transition: all 0.5s ease;
            animation: holo-float 4s ease-in-out infinite;
        }

        @keyframes holo-float {
            0%, 100% { 
                transform: rotateY(0deg) rotateX(0deg) translateY(0px);
            }
            25% { 
                transform: rotateY(90deg) rotateX(5deg) translateY(-10px);
            }
            50% { 
                transform: rotateY(180deg) rotateX(0deg) translateY(0px);
            }
            75% { 
                transform: rotateY(270deg) rotateX(-5deg) translateY(-10px);
            }
        }

        .hologram-box:hover {
            animation-play-state: paused;
            transform: rotateY(20deg) rotateX(10deg) scale(1.2);
            filter: brightness(1.3) drop-shadow(0 0 30px #40e0ff);
        }

        .holo-face {
            position: absolute;
            width: 200px;
            height: 200px;
            background: linear-gradient(45deg, 
                rgba(255, 107, 157, 0.3), 
                rgba(64, 224, 255, 0.3));
            border: 2px solid #40e0ff;
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            box-shadow: 
                inset 0 0 30px rgba(64, 224, 255, 0.3),
                0 0 50px rgba(64, 224, 255, 0.2);
        }

        .holo-front { transform: translateZ(100px); }
        .holo-back { 
            transform: translateZ(-100px) rotateY(180deg);
            background: linear-gradient(45deg, 
                rgba(64, 224, 255, 0.3), 
                rgba(255, 107, 157, 0.3));
        }
        .holo-left { 
            transform: rotateY(-90deg) translateZ(100px);
            background: linear-gradient(45deg, 
                rgba(155, 255, 107, 0.3), 
                rgba(64, 224, 255, 0.3));
        }
        .holo-right { 
            transform: rotateY(90deg) translateZ(100px);
            background: linear-gradient(45deg, 
                rgba(255, 155, 107, 0.3), 
                rgba(255, 107, 157, 0.3));
        }
        .holo-top { 
            transform: rotateX(90deg) translateZ(100px);
            background: linear-gradient(45deg, 
                rgba(255, 255, 107, 0.3), 
                rgba(155, 255, 107, 0.3));
        }
        .holo-bottom { 
            transform: rotateX(-90deg) translateZ(100px);
            background: linear-gradient(45deg, 
                rgba(255, 107, 255, 0.3), 
                rgba(255, 255, 107, 0.3));
        }

        /* Click Effect */
        .hologram-box.clicked {
            animation: hologram-explode 2s ease-out forwards;
        }

        @keyframes hologram-explode {
            0% { 
                transform: scale(1);
                filter: brightness(1);
            }
            25% { 
                transform: scale(1.5);
                filter: brightness(3) hue-rotate(180deg);
            }
            50% { 
                transform: scale(2);
                filter: brightness(5) hue-rotate(360deg);
                opacity: 0.8;
            }
            100% { 
                transform: scale(0);
                opacity: 0;
            }
        }

        /* Instructions */
        .instructions {
            color: #40e0ff;
            font-family: 'Orbitron', monospace;
            text-align: center;
            font-size: 1.1rem;
            text-shadow: 0 0 10px #40e0ff;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { 
                text-shadow: 0 0 10px #40e0ff;
                transform: scale(1);
            }
            50% { 
                text-shadow: 0 0 20px #40e0ff, 0 0 30px #40e0ff;
                transform: scale(1.05);
            }
        }

        @media (max-width: 768px) {
            .instructions {
                font-size: 0.9rem;
                padding: 0 20px;
            }
        }

        /* Portal Effect */
        .portal-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 1s ease;
            z-index: 10;
        }

        .portal-container.active {
            opacity: 1;
            visibility: visible;
        }

        .portal {
            width: 0px;
            height: 0px;
            border-radius: 50%;
            background: 
                radial-gradient(circle, 
                    transparent 30%, 
                    #ff6b9d 35%, 
                    transparent 40%),
                conic-gradient(from 0deg, 
                    #ff6b9d, #40e0ff, #00ff88, #ff6b9d);
            animation: portal-expand 3s ease-out forwards;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 100px #ff6b9d;
        }

        @keyframes portal-expand {
            0% { 
                width: 0px;
                height: 0px;
                transform: rotate(0deg);
            }
            50% { 
                width: 400px;
                height: 400px;
                transform: rotate(180deg);
            }
            100% { 
                width: 300px;
                height: 300px;
                transform: rotate(360deg);
            }
        }

        /* Rocket Launch */
        .rocket-launch {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 4rem;
            opacity: 0;
            z-index: 15;
        }

        .rocket-launch.launch {
            animation: rocket-fly 2s ease-out forwards;
        }

        @keyframes rocket-fly {
            0% {
                bottom: -100px;
                opacity: 1;
                transform: translateX(-50%) rotate(0deg);
            }
            25% {
                transform: translateX(-30%) rotate(-10deg);
            }
            50% {
                transform: translateX(-70%) rotate(10deg);
            }
            75% {
                transform: translateX(-50%) rotate(-5deg);
            }
            100% {
                bottom: calc(100vh + 100px);
                opacity: 0;
                transform: translateX(-50%) rotate(0deg);
            }
        }

        /* Particle Explosion */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #40e0ff;
            border-radius: 50%;
            pointer-events: none;
        }

        .particle.explode {
            animation: particle-explode 2s ease-out forwards;
        }

        @keyframes particle-explode {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(0);
                opacity: 0;
            }
        }

        /* Memory Gallery */
        .memory-gallery {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 1s ease;
            z-index: 100;
        }

        .memory-gallery.show {
            opacity: 1;
            visibility: visible;
        }

        /* Carousel Container */
        .carousel-wrapper {
            width: 100%;
            max-width: 1200px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .memory-carousel {
            display: flex;
            gap: 40px;
            align-items: center;
            justify-content: center;
            transition: transform 0.5s ease;
            padding: 0 50px;
        }

        /* ปุ่มเลื่อนการ์ด */
        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 107, 157, 0.3);
            border: 2px solid #ff6b9d;
            color: white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            z-index: 102;
        }

        .carousel-nav:hover {
            background: rgba(255, 107, 157, 0.5);
            transform: translateY(-50%) scale(1.1);
        }

        .nav-prev {
            left: 20px;
        }

        .nav-next {
            right: 20px;
        }

        /* หน้าการ์ด */
        .memory-card {
            min-width: 400px; /* ทำให้การ์ดใหญ่ขึ้น */
            height: 500px; /* ทำให้การ์ดสูงขึ้น */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 25px;
            padding: 40px 35px; /* เพิ่ม padding */
            position: relative;
            transform: scale(0);
            animation: cardAppear 0.8s ease forwards;
            box-shadow: 0 25px 50px rgba(102, 126, 234, 0.4);
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .memory-card:nth-child(1) { animation-delay: 0.5s; }
        .memory-card:nth-child(2) { animation-delay: 0.7s; }
        .memory-card:nth-child(3) { animation-delay: 0.9s; }

        @keyframes cardAppear {
            0% { 
                transform: scale(0) rotateY(-180deg);
                opacity: 0;
            }
            100% { 
                transform: scale(1) rotateY(0deg);
                opacity: 1;
            }
        }

        .card-icon {
            font-size: 4rem; /* ทำให้ไอคอนใหญ่ขึ้น */
            text-align: center;
            margin-bottom: 25px;
            animation: icon-glow 3s ease-in-out infinite;
        }

        @keyframes icon-glow {
            0%, 100% { 
                filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
                transform: scale(1);
            }
            50% { 
                filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.8));
                transform: scale(1.1);
            }
        }

        .card-title {
            color: white;
            font-size: 1.8rem; /* ทำให้ title ใหญ่ขึ้น */
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .card-message {
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.8;
            text-align: center;
            font-size: 1.15rem; /* ทำให้ข้อความใหญ่ขึ้น */
        }

        .card-glow {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: glow-sweep 4s ease-in-out infinite;
        }

        @keyframes glow-sweep {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(0%) translateY(0%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        /* Navigation */
        .nav-close {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(255, 107, 157, 0.2);
            border: 2px solid #ff6b9d;
            color: white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            z-index: 101;
        }

        .nav-close:hover {
            background: rgba(255, 107, 157, 0.4);
            transform: scale(1.1);
        }

        /* Card indicators */
        .card-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator.active {
            background: #ff6b9d;
            transform: scale(1.2);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .carousel-wrapper {
                padding: 0 20px;
            }
            
            .memory-carousel {
                gap: 20px;
                padding: 0 20px;
            }
            
            .memory-card {
                min-width: 320px;
                height: 450px;
                padding: 30px 25px;
            }
            
            .card-title {
                font-size: 1.5rem;
            }
            
            .card-message {
                font-size: 1rem;
                line-height: 1.6;
            }
            
            .card-icon {
                font-size: 3rem;
                margin-bottom: 20px;
            }
            
            .hologram-box {
                width: 150px;
                height: 150px;
            }
            
            .holo-face {
                width: 150px;
                height: 150px;
                font-size: 3rem;
            }

            .carousel-nav {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }

            .nav-prev { left: 10px; }
            .nav-next { right: 10px; }
        }
    </style>
</head>
<body>
    <div class="custom-cursor" id="cursor"></div>
    
    <div class="matrix-bg" id="matrixBg"></div>
    
    <div class="main-scene" id="mainScene">
        <div class="hologram-container">
            <div class="hologram-box" id="holoBox">
                <div class="holo-face holo-front">🌌</div>
                <div class="holo-face holo-back">💫</div>
                <div class="holo-face holo-left">⭐</div>
                <div class="holo-face holo-right">✨</div>
                <div class="holo-face holo-top">🌟</div>
                <div class="holo-face holo-bottom">💖</div>
            </div>
        </div>
        
        <div class="instructions">
            ◦ CLICK THE HOLOGRAM TO Enter MEMORY DIMENSION ◦
        </div>
    </div>

    <div class="rocket-launch" id="rocketLaunch">🚀</div>

    <div class="portal-container" id="portalContainer">
        <div class="portal"></div>
    </div>

    <div class="memory-gallery" id="memoryGallery">
        <button class="nav-close" id="navClose">×</button>
        
        <div class="carousel-wrapper">
            <button class="carousel-nav nav-prev" id="navPrev">‹</button>
            <button class="carousel-nav nav-next" id="navNext">›</button>
            
            <div class="memory-carousel" id="memoryCarousel">
                <div class="memory-card">
                    <div class="card-glow"></div>
                    <div class="card-icon">🚀</div>
                    <div class="card-title">My Heart</div>
                    <div class="card-message">
                        เค้ารักเธอนะค้าบบอ้วน<br>
                        ถ้าอ้วนยังรักเค้าอยู่<br>
                        กลับมาหาเค้าไวๆนะค้าบบ<br>
                        เค้าจะไม่ปล่อยมืออ้วนๆอีกแล้ววค้าบบ<br>
                        เค้าสัญญาว่าจะรักแค่อ้วนๆคนเดียวตลอดไปเยย
                    </div>
                </div>
                
                <div class="memory-card">
                    <div class="card-glow"></div>
                    <div class="card-icon">🌟</div>
                    <div class="card-title">SPECIAL</div>
                    <div class="card-message">
                        I loves you the most in the world. <br>
                        You must have loved me the same way back then.<br>
                         I'm sorry for ruining everything. 
                         <br>I'm really sorry.
                    </div>
                </div>
                
                <div class="memory-card">
                    <div class="card-glow"></div>
                    <div class="card-icon">💝</div>
                    <div class="card-title">Love</div>
                    <div class="card-message">
                        เค้าคิดถึงอ้วนๆทุกวันเลยยนะค้าบบ<br>
                        แต่เค้าก็ไม่รู้ว่าอ้วนๆคิดถึงเค้าบ้างงมั้ยย<br>
                        และอ้วนๆจะตัดสินใจอีกนานแค่ไหน<br>
                        เค้าก็ม่ายรู้เลยยแต่เค้าก็ไม่อยากให้อ้วนๆคิดมากเกินไป <br>
                        💖 อ้วนกลับมาอยู่กับเค้าได้มั้ยค้าบบ💖
                    </div>
                </div>
            </div>
            
            <div class="card-indicators">
                <div class="indicator active" data-card="0"></div>
                <div class="indicator" data-card="1"></div>
                <div class="indicator" data-card="2"></div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const cursor = document.getElementById('cursor');
        const holoBox = document.getElementById('holoBox');
        const mainScene = document.getElementById('mainScene');
        const rocketLaunch = document.getElementById('rocketLaunch');
        const portalContainer = document.getElementById('portalContainer');
        const memoryGallery = document.getElementById('memoryGallery');
        const navClose = document.getElementById('navClose');
        const matrixBg = document.getElementById('matrixBg');
        const carousel = document.getElementById('memoryCarousel');
        const navPrev = document.getElementById('navPrev');
        const navNext = document.getElementById('navNext');
        const indicators = document.querySelectorAll('.indicator');

        let isActivated = false;
        let currentCard = 0;
        const totalCards = 3;

        // Custom cursor tracking
        document.addEventListener('mousemove', (e) => {
            if (cursor) {
                cursor.style.left = e.clientX - 10 + 'px';
                cursor.style.top = e.clientY - 10 + 'px';
            }
        });

        // Carousel functions
       // แก้ไขฟังก์ชัน updateCarousel()
function updateCarousel() {
    // คำนวณขนาดการ์ดจากการ์ดจริงๆ
    const cardElement = document.querySelector('.memory-card');
    const cardWidth = cardElement ? cardElement.offsetWidth : 400;
    const gap = window.innerWidth <= 768 ? 20 : 40; // gap ระหว่างการ์ด
    
    const translateX = currentCard * (cardWidth + gap);
    carousel.style.transform = `translateX(-${translateX}px)`;
    
    // Update indicators
    indicators.forEach((indicator, index) => {
        indicator.classList.toggle('active', index === currentCard);
    });
}

        function nextCard() {
            currentCard = (currentCard + 1) % totalCards;
            updateCarousel();
        }

        function prevCard() {
            currentCard = (currentCard - 1 + totalCards) % totalCards;
            updateCarousel();
        }

        // Navigation events
        navNext.addEventListener('click', nextCard);
        navPrev.addEventListener('click', prevCard);

        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', () => {
                currentCard = index;
                updateCarousel();
            });
        });

        // Touch/Swipe support
        let startX = 0;
        let startY = 0;
        let isDragging = false;

        carousel.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
            isDragging = true;
        }, { passive: true });

        carousel.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            
            const currentX = e.touches[0].clientX;
            const currentY = e.touches[0].clientY;
            const diffX = startX - currentX;
            const diffY = startY - currentY;
            
            // ถ้าไปทางซ้าย-ขวามากกว่าขึ้น-ลง ให้ swipe
            if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
                if (diffX > 0) {
                    nextCard();
                } else {
                    prevCard();
                }
                isDragging = false;
            }
        }, { passive: true });

        carousel.addEventListener('touchend', () => {
            isDragging = false;
        });

        // Mouse drag support (desktop)
        let mouseStartX = 0;
        let isMouseDragging = false;

        carousel.addEventListener('mousedown', (e) => {
            mouseStartX = e.clientX;
            isMouseDragging = true;
        });

        carousel.addEventListener('mousemove', (e) => {
            if (!isMouseDragging) return;
            
            const diffX = mouseStartX - e.clientX;
            if (Math.abs(diffX) > 100) {
                if (diffX > 0) {
                    nextCard();
                } else {
                    prevCard();
                }
                isMouseDragging = false;
            }
        });

        carousel.addEventListener('mouseup', () => {
            isMouseDragging = false;
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (memoryGallery.classList.contains('show')) {
                if (e.key === 'ArrowLeft') {
                    prevCard();
                } else if (e.key === 'ArrowRight') {
                    nextCard();
                }
            }
        });

        // Matrix rain effect
        function createMatrixRain() {
            const chars = '01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン';
            
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const char = document.createElement('div');
                    char.className = 'matrix-char';
                    char.textContent = chars[Math.floor(Math.random() * chars.length)];
                    char.style.left = Math.random() * 100 + '%';
                    char.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    char.style.fontSize = (Math.random() * 16 + 10) + 'px';
                    char.style.animationDelay = Math.random() * 2 + 's';
                    matrixBg.appendChild(char);
                    
                    setTimeout(() => {
                        if (char.parentNode) {
                            char.remove();
                        }
                    }, 5000);
                }, i * 100);
            }
        }

        // Create particle explosion
        function createParticleExplosion(x, y) {
            const colors = ['#ff6b9d', '#40e0ff', '#00ff88', '#fff'];
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                
                const angle = (i / 20) * Math.PI * 2;
                const velocity = Math.random() * 100 + 50;
                const moveX = Math.cos(angle) * velocity;
                const moveY = Math.sin(angle) * velocity;
                
                particle.style.transform = `translate(${moveX}px, ${moveY}px)`;
                document.body.appendChild(particle);

                particle.classList.add('explode');
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.remove();
                    }
                }, 2000);
            }
        }

        // Main hologram click effect
        holoBox.addEventListener('click', (e) => {
            if (isActivated) return;
            isActivated = true;
            
                   // Create particle explosion at click point
        const rect = holoBox.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        createParticleExplosion(centerX, centerY);
        
        // Start the sequence
        holoBox.classList.add('clicked');
        
        // Step 1: Hide main scene
        setTimeout(() => {
            mainScene.classList.add('hidden');
        }, 500);
        
        // Step 2: Launch rocket
        setTimeout(() => {
            rocketLaunch.classList.add('launch');
        }, 1000);
        
        // Step 3: Show portal
        setTimeout(() => {
            portalContainer.classList.add('active');
        }, 1500);
        
        // Step 4: Show memory gallery
        setTimeout(() => {
            portalContainer.classList.remove('active');
            memoryGallery.classList.add('show');
            updateCarousel(); // Initialize carousel position
        }, 4500);
    });

    // Close gallery
    navClose.addEventListener('click', () => {
        memoryGallery.classList.remove('show');
        
        setTimeout(() => {
            location.reload();
        }, 1000);
    });

    // Click outside to close
    memoryGallery.addEventListener('click', (e) => {
        if (e.target === memoryGallery) {
            memoryGallery.classList.remove('show');
            setTimeout(() => {
                location.reload();
            }, 1000);
        }
    });

    // Add hover cursor effects (desktop only)
    if (cursor) {
        holoBox.addEventListener('mouseenter', () => {
            cursor.style.transform = 'scale(1.5)';
            cursor.style.borderColor = '#00ff88';
        });

        holoBox.addEventListener('mouseleave', () => {
            cursor.style.transform = 'scale(1)';
            cursor.style.borderColor = '#ff6b9d';
        });
    }

    // Auto slide (optional)
    let autoSlideTimer;
    
    function startAutoSlide() {
        autoSlideTimer = setInterval(() => {
            if (memoryGallery.classList.contains('show')) {
                nextCard();
            }
        }, 5000); // เปลี่ยนการ์ดทุก 5 วินาที
    }

    function stopAutoSlide() {
        if (autoSlideTimer) {
            clearInterval(autoSlideTimer);
        }
    }

    // Start auto slide when gallery is shown
    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            if (mutation.target.classList.contains('show')) {
                setTimeout(() => {
                    startAutoSlide();
                }, 2000); // รอให้ animation เสร็จก่อน
            } else {
                stopAutoSlide();
            }
        });
    });

    observer.observe(memoryGallery, { attributes: true, attributeFilter: ['class'] });

    // Pause auto slide on interaction
    [navPrev, navNext, carousel].forEach(element => {
        element.addEventListener('mouseenter', stopAutoSlide);
        element.addEventListener('touchstart', stopAutoSlide);
    });

    indicators.forEach(indicator => {
        indicator.addEventListener('click', stopAutoSlide);
    });

    // Resume auto slide after interaction
    setTimeout(() => {
        [navPrev, navNext, carousel].forEach(element => {
            element.addEventListener('mouseleave', () => {
                if (memoryGallery.classList.contains('show')) {
                    setTimeout(startAutoSlide, 3000);
                }
            });
        });
    }, 1000);

    // Initialize effects
    createMatrixRain();
    setInterval(createMatrixRain, 4000);

    // Random particles
    setInterval(() => {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * window.innerWidth + 'px';
        particle.style.top = Math.random() * window.innerHeight + 'px';
        particle.style.background = '#40e0ff';
        particle.style.animation = 'sparkleAnim 2s linear forwards';
        particle.style.position = 'fixed';
        particle.style.pointerEvents = 'none';
        particle.style.zIndex = '1';
        document.body.appendChild(particle);
        
        setTimeout(() => {
            if (particle.parentNode) {
                particle.remove();
            }
        }, 2000);
    }, 800);

    // Handle orientation change
    window.addEventListener('orientationchange', () => {
        setTimeout(() => {
            updateCarousel();
        }, 100);
    });

    // Handle window resize
    window.addEventListener('resize', () => {
        updateCarousel();
    });

    // Add sparkle animation keyframes dynamically
    const style = document.createElement('style');
    style.textContent = `
        @keyframes sparkleAnim {
            0% {
                opacity: 0;
                transform: scale(0) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: scale(1) rotate(180deg);
            }
            100% {
                opacity: 0;
                transform: scale(0.5) rotate(360deg);
            }
        }
    `;
    document.head.appendChild(style);
</script>
</body>

</html>

